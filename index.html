<html>
<head>
    <style>

        body {
            overflow: hidden;
            width: 100%;
        }

        /*#background {*/
            /*height: 500px;*/
        /*}*/
        .particle{
            border-radius: 50%;
            position: absolute;
            z-index: -1;
        }

        .card {
            width: 400px;
            height: 70%;
            background-color: #d6e3e8;
            z-index: 10;
            margin: 2% auto;
            opacity: 0.5;
        }

        @media (max-width: 1023px) {
            body {
                height: 100%;
            }
            .card {
                width: 90%;
                height: 90%;
                margin: 8% auto;
            }
        }


    </style>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

<body onload="onLoad()">
<div id="background">

</div>
<div class="card">
    <script type="text/javascript">var submitted=false;</script>
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
    <form action="https://docs.google.com/forms/d/e/1FAIpQLSeDRNj1-6h6uipJ-01G9N00qbIwuaAPyWuRHA6tEVAtZT7DEw/formResponse" method="post" target="hidden_iframe"
          id="rsvp">
        <label for="name">Your Name</label>
        <input name="entry.14868917" type="text" id="name" />
        <p>Will you be attending?</p>
        <input type="checkbox" name="entry.1396445814" id="attend1" value="Reception at Bangalore" />
        <label for="attend1">Reception at Bangalore</label>
        <input type="checkbox" name="entry.1396445814" id="attend2" value="Muhurtham at Bangalore" />
        <label for="attend2">Muhurtham at Bangalore</label>
        <input type="checkbox" name="entry.1396445814" id="attend3" value="Reception at Chennai" />
        <label for="attend3">Reception at Chennai</label>
        <input type="checkbox" name="entry.1396445814" id="attend4" value="Regret" />
        <label for="attend4">Regret</label>
        <p>How many guests?</p>
        <select name="entry.336775142">
            <option selected disabled>Choose</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5+">5</option>
        </select>
        <input name="entry.1599336520" type="hidden" id="ip" hidden/>
        <input name="entry.1894150066" type="hidden" id="city" hidden/>

        <button class="g-recaptcha" data-sitekey="6Lcb4SgUAAAAAPd4wcvPmEPij_11rcg5jILPC75A" data-callback='onSubmit'
                type="submit" value="Submit">Submit</button>
    </form>
</div>
</body>
<script>

    function onLoad() {
        $.getJSON('//freegeoip.net/json/?callback=?', function(data) {
            $("#ip").val(data.ip);
            $("#city").val(data.city);

        });
    }

    function onSubmit(token) {

        document.getElementById("rsvp").submit();

        if(localStorage.getItem("DeepthiWeddingRSVP") == undefined) {
            localStorage.setItem("DeepthiWeddingRSVP", true);
        }
    }
    
    function Particles() {
        this.colors = [
            '#ff0025',
            '#ffaa3c',
            '#83fe2d'
        ];

        this.minRadius = 10;
        this.maxRadius = 50;

        this.minOpacity = .09;
        this.maxOpacity = .1;

        this.minSpeed = 100000;
        this.maxSpeed = 1000000;

        this.numParticles = 100;
    }

    Particles.prototype._rand = function (min, max) {
        return Math.random() * (max - min) + min;
    };

    Particles.prototype.createParticles = function () {

        for(var i=0; i<this.numParticles; i++) {

            var one = document.createElement('div');

            var radius = this._rand(this.minRadius, this.maxRadius);
            var opacity = this._rand(this.minOpacity, this.maxOpacity);
            var startLocLeft = this._rand(0, $(window).width());
            var startLocTop = this._rand(0, $(window).height());
            var color = this._rand(0,3);

            document.getElementById("background").appendChild(one);

            one.setAttribute("style", "height: " + radius + "; width: " + radius + "; opacity: " + opacity +
                "; left: " + startLocLeft + "; top: " + startLocTop + "; background-color: " +
                this.colors[Math.floor(color)]);

            this.animateParticle(one);

            one.className = 'particle';
        }


    };

    Particles.prototype.makeNewPosition = function (){

        var h = $(window).height() - 50;
        var w = $(window).width() - 50;

        var nh = Math.floor(Math.random() * h);
        var nw = Math.floor(Math.random() * w);

        return [nh,nw];

    };
    
    Particles.prototype.animateParticle = function (one) {
        var newq = this.makeNewPosition();
        var oldq = $(one).offset();
        //var speed = this.calcSpeed([oldq.top, oldq.left], newq);
        var speed = this._rand(this.minSpeed, this.maxSpeed);
        var that = this;

        $(one).animate({ top: newq[0], left: newq[1] }, speed, function () {
            //that.animateParticle(one);
        });
    };

    var particle = new Particles();
    particle.createParticles();

</script>
</head>

</html>
